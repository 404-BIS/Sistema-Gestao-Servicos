<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
        <style type="text/css"> 
            
            /*Modal Padrão*/
            .modal {
                display: none; 
                position: fixed; 
                z-index: 1; 
                padding-top: 100px;
                left: 0;
                top: 0;
                width: 100%; 
                height: 100%; 
                overflow: auto;
                background-color: rgb(0,0,0); 
                background-color: rgba(0,0,0,0.6); 
            }

            /* Style Modal Aceitar Chamado*/
            .box-aceitar{
                border:solid 5px #A8A7A7;
                border-radius: 20px;
                background-color: #fcfcfc;
                width: 600px;
                height: 200px;
                display: flex;
                align-items: center;
                flex-direction: column;
                margin: auto;
            }

            .box-aceitar p{
                padding: 0px 0px 20px 0px; 
                font-size: 26px;
            }

            .box-aceitar button{
                border:none;
                font-size:24px;
                color:#FCFCFC;
                background-color: rgba(0, 155, 34, 1);
                border-radius:10px;
                height: 60px;
                width: 200px;
            }

            /* Style Modal fechar chamado em analise*/

            .card-conclu main{
                margin:0px 110px 0px 110px;
            }

            .card-conclu{
                border:solid 5px #A8A7A7;
                border-radius: 20px;
                background-color: #fcfcfc;
                width: 1010px;
                height: 600px;
                margin: auto;
            }

            .conclusao-chamado{
                font-weight: 500;
                font-size: 26px;
                display: flex;
                justify-content: center;
            }

            .card-2{
                border:solid 2px #A8A7A7;
                border-radius: 10px;
                width:100%;
                align-items: center;
                padding: 20px;
                margin: 20px 0px 24px 0px;
            }

            .info-conclu{
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 16px;    
            }

            .titulo-conclu{
                font-weight: 600;  
                font-size: 18px;
            }
   
            .tipo-conclu{
                font-weight: 600; 
                margin-bottom: 16px;
                font-size: 14px;
            }

            .descricao-conclu{
                font-weight: 600; 
                font-size: 14px;
            }
            
            textarea{
                font-size: 18px;
                font-weight:600;
                border: solid 2px #A8A7A7;
                border-radius: 10px;
                height: 164px;
                width: 100%;
                resize: vertical;
                padding: 10px;
            }
    
            .bot-conclu{
                border:none;
                font-size:24px;
                color:#FCFCFC;
                background-color: rgba(0, 155, 34, 1);
                border-radius:10px;
                height: 60px;
                width: 300px;
                margin-top:40px;
            }

            .bot-conclu:hover{
                font-size: 27px;
            }

            .botao-concluir{
                display: flex;
                justify-content: center;
                align-items: center;    
            }
           
            .superior{
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-right:10px;
            }

            .icon-fechar{
                height: 40px;
                width: 40px;
            }

            </style>
    </head>
    <body>
        
        <header>
            <img src="../../static/images/Usuario.svg"> 
            <nav>
                <a class="minha-chamada" href="/executor/chamadas-exec"><img class="icon-chamada" src="../../static/images/Manutencao.svg"> Meus Chamados</a>
                <a class="minha-req" href="/executor/menu"><img class="icon-req" src="../../static/images/Requisição.svg"> Minhas requisições</a>
                <a href="/executor/solicitacao">
                <button class="nova-req"> <img class="icon-mais"src="../../static/images/Mais.svg">Nova Requisição</button>
                </a>
            </nav>
        </header>
        <main>
            <!--chamados em análise-->
            <p class="chamado-analise">Chamados em Análise</p>
            {% set variable = namespace() %}
            {% set variable.useropen = 1 %}
            {%  if Values == 0 or leitoraberto == 0%}
                <div class="box-req">
                    <p>Sem requisições para análise no momento</p>
                </div>
            {% else %}
                {% for user in Details %}
                    {% set variable.useropen = user %}
                    {%if user[4] == 'Aberta'%}  
                        
                        <details>
                            <summary>
                                <p>{{user[1]}}</p><!--variavel titulo-->
                                {% if user[3] == 'Problemas de Hardware'%}
                                    <img class="icon" src="../static/images/Hardware.png" alt="icon"> <!--variavel icon-->
                                {% elif user[3] == 'Problemas de Software'%}
                                    <img class="icon" src="../static/images/Software.png" alt="icon">
                                {%else%}
                                    <img class="icon" src="../static/images/Info.png" alt="icon">
                                {%endif%}
                            </summary>
                            <div class="conteudo">
                                <p>Tipo: <span>{{user[3]}}</span></p>
                                <p>Descrição: <span>{{user[2]}}</span></p>
                            </div>
                            <!-- <form action="/executor/chamadas-exec"> -->
                            <div class="rejeitar-aceitar"> 
                                <button class="rejeitar btnrejeitar" type="submit">Rejeitar</button>
                                <button class="aceitar" type="submit" id="btnaceitar">Aceitar</button>
                            </div>
                        </details>
                       
                    {%endif%}   
                {% endfor %}
            {% endif %}
            
            <div id="rejeitar" class="modal">
                <div class="card-conclu">   
                    <main>
                        <div class="icon-fechar"></div>
                        <p class="conclusao-chamado"> Conclusão de Chamada </p> 
                        <div class="card-2">
                            <div class="info-conclu">
                                <p class="titulo-conclu">{{variable.useropen[1]}}</p><!--variavel titulo-->
                                <p>11/11/1111</p>
                            </div>
                            <div class="conteudo-conclu">
                                <p class="tipo-conclu">Tipo: <span>{{variable.useropen[3]}}</span></p>
                                <p class="descricao-conclu">Descrição: <span>{{variable.useropen[2]}}</span></p>
                            </div>
                        </div>
                        <textarea name="txtdesc" id="txtdesc" placeholder="Descreva a conclusão"></textarea>
                        <div class="botao-concluir">
                            <form action="/recusando/{{variable.useropen.0}}" method="POST">
                                <button class="bot-conclu" type="submit">Concluir Chamado</button>
                            </form>
                        </div>
                    </main>
                </div> 
            </div>
            <div id="aceitar" class="modal">
                <div class="box-aceitar">
                    <div class="icon-fechar"></div>
                    <p>Chamada Aceita</p>
                    <form action="/aceitando/{{variable.useropen.0}}" method="POST"> 
                        <button class="aceitar" type="submit">Aceitar</button>
                    </form> 
                </div> 
            </div>
            <!--chamados andamento-->
            <p class="chamado-andamento">Chamados em Andamento</p>
            {% set ns = namespace() %}
            {% set ns.user = 1 %}

            {%  if Values == 0 or leitorandamento == 0%}
                <div class="box-req">
                    <p>Sem chamados em andamento no momento</p>
                </div>
            {%else%}
                {% for user in Details %}
                    {% set ns.user = user %}
                    {%if user[4] == 'Andamento'%} 
                        <details>
                            <summary>
                                <p>{{user[1]}}</p><!--variavel titulo-->
                                {% if user[3] == 'Problemas de Hardware'%}
                                    <img class="icon" src="../static/images/Hardware.png" alt="icon"> <!--variavel icon-->
                                {% elif user[3] == 'Problemas de Software'%}
                                    <img class="icon" src="../static/images/Software.png" alt="icon">
                                {%else%}
                                    <img class="icon" src="../static/images/Info.png" alt="icon">
                                {%endif%}

                            </summary>
                            <div class="conteudo">
                                <p>Tipo: <span>{{user[3]}}<!--variavel tipo--></span></p>
                                <p>Descrição: <span>{{user[2]}}<!--variavel descricao--></span></p>
                            </div>
                            <div class="rejeitar-aceitar"> 
                                <button class="rejeitar btnrejeitar" type="submit">Rejeitar</button>
                            </div>
                        </details>
                        
                    {%endif%}
                {%endfor%}
            {%endif%}
            <div id="rejeitar" class="modal">
                <div class="card-conclu">   
                    <main>
                        <div class="icon-fechar"></div>
                        <p class="conclusao-chamado"> Conclusão de Chamada </p> 
                        <div class="card-2">
                            <div class="info-conclu">
                                <p class="titulo-conclu">{{ns.user[1]}}</p><!--variavel titulo-->
                                <p>11/11/1111</p>
                            </div>
                            <div class="conteudo-conclu">
                                <p class="tipo-conclu">Tipo: <span>{{ns.user[3]}}</span></p>
                                <p class="descricao-conclu">Descrição: <span>{{ns.user[2]}}</span></p>
                            </div>
                        </div>
                        <textarea name="txtdesc" id="txtdesc" placeholder="Descreva a conclusão"></textarea>
                        <div class="botao-concluir">
                            <form action="/recusando/{{ns.user.0}}" method="POST">
                                <button class="bot-conclu" type="submit">Concluir Chamado</button>
                            </form>
                        </div>
                    </main>
                </div> 
            </div>
            

            <!--chamados fechado-->
            <p class="chamado-fechada">Chamados Fechados</p>
            {%  if leitorfechado == 0 or Values==0 %}
                <div class="box-req">
                    <p>Sem chamados fechadas no momento</p>
                </div>
            {%else%}
                {% for user in Details %}
                    {%if user[4] == 'Fechada'%} 
                        <details>
                            <summary>
                                <p>{{user[1]}}</p><!--variavel titulo-->
                                {% if user[3] == 'Problemas de Hardware'%}
                                    <img class="icon" src="../static/images/Hardware.png" alt="icon"> <!--variavel icon-->
                                {% elif user[3] == 'Problemas de Software'%}
                                    <img class="icon" src="../static/images/Software.png" alt="icon">
                                {%else%}
                                    <img class="icon" src="../static/images/Info.png" alt="icon">
                                {%endif%}
                            </summary>
                            <div class="conteudo">
                                <p>Tipo: <span>{{user[3]}}<!--variavel tipo--></span></p>
                                <p>Descrição: <span>{{user[2]}}<!--variavel descricao--></span></p>
                            </div>
                            <p class="detalhes-fechamento"> Requisição Fechada por: <span> <!--variavel de usuario que fechou o chamado--></span></p> 
                            <div class="texto-fechamento"> <span> </span> </div>
                        </details>
                   {%endif%}
                {%endfor%} 
            {%endif%}

            <!--Legendas-->
            <p class="tipo-legenda">Tipos de problemas</p>
            <div class="legenda">
                <div class="hardware">            
                    <div>
                        <p class="categoria">Problemas de Hardware</p>
                        <p class="quant">Quantidade:{{prob}}</p> <!--variavel de quantidade-->
                    </div>    
                <img class="icon" src="../../static/images/Hardware.png" alt="hardware">
            </div>   
    
                <div class="software">
                    <div>
                        <p class="categoria">Problemas de Software</p>
                        <p class="quant">Quantidade:{{prob1}}</p> <!--variavel de quantidade-->
                    </div>    
                    <img class="icon" src="../../static/images/Software.png" alt="hardware">
                </div>  
    
                <div class="info">
                    <div>
                        <p class="categoria">Esclarecimento/informação</p>
                        <p class="quant">Quantidade:{{prob2}}</p> <!--variavel de quantidade-->
                    </div>    
                    <img class="icon" src="../../static/images/Info.png" alt="hardware">
                </div>  
            </div>
        </main>

<!--script-->
        
        <script>
            var modalaceitar = document.getElementById("aceitar");
            var modalrejeitar = document.getElementById("rejeitar");
            var btnaceitar = document.getElementById("btnaceitar");
            var btnsrejeitar = document.getElementsByClassName("btnrejeitar");
            var fechar = document.getElementsByClassName("icon-fechar")[0];
            for (let x=0;btnsrejeitar.length >x ; x++){
                console.log('cheguei')
                btnsrejeitar[x].onclick = function() {
                modalrejeitar.style.display = "block";
                
                }
            }
            btnaceitar.onclick = function() {
                modalaceitar.style.display = "block";
            }
           
            fechar.onclick = function() {
                modalaceitar.style.display = "none";
            }
            fechar.onclick = function() {
                modalrejeitar.style.display = "none";
            }
            window.onclick = function(event) {
              if (event.target == modalaceitar) {
                modalaceitar.style.display = "none";
              }

              if (event.target == modalrejeitar) {
                modalrejeitar.style.display = "none";
              }
            }
            </script>
    </body>
</html>
